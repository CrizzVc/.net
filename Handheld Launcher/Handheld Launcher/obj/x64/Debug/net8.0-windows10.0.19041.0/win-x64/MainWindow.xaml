<?xml version="1.0" encoding="utf-8"?>
<Window x:ConnectionId='1'
    x:Class="Handheld_Launcher.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Handheld_Launcher"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Handheld Launcher">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>

    <Grid x:ConnectionId='2' x:Name="RootGrid"
                                    
          IsTabStop="True">

        <Grid.Resources>
            <local:BoolToWidthConverter x:Key="BoolToWidthConverter" />
            <!-- Converter para visibilidad basada en null (añadido) -->
            <local:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />
            <local:NullToVisibilityConverter x:Key="NullToVisibilityInverted" Invert="True" />
        </Grid.Resources>

        <!-- COLUMNAS -->
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="80"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- FILAS -->
        <Grid.RowDefinitions>
            <RowDefinition Height="9*" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="50" />
        </Grid.RowDefinitions>

        <!-- SIDEBAR -->
        <Grid x:ConnectionId='3' x:Name="LeftSidebar"
              Grid.Column="0"
              Grid.RowSpan="3"
              Background="#16171b">

            <StackPanel VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Spacing="25">

                <Button x:ConnectionId='31'                    Width="50" Height="50" CornerRadius="10">
                    <FontIcon Glyph="&#xE80F;" FontFamily="Segoe MDL2 Assets" FontSize="24"/>
                </Button>

                <Button x:ConnectionId='32'                       Width="50" Height="50" CornerRadius="10">
                    <FontIcon Glyph="&#xe74c;" FontFamily="Segoe MDL2 Assets" FontSize="24"/>
                </Button>

                <Button x:ConnectionId='33'                       Width="50" Height="50" CornerRadius="10">
                    <FontIcon Glyph="&#xe948;" FontFamily="Segoe MDL2 Assets" FontSize="24"/>
                </Button>

                <Button Width="50" Height="50" CornerRadius="10">
                    <Button.Flyout>
                        <MenuFlyout>
                            <MenuFlyoutItem x:ConnectionId='34' Text="Color sólido"                    />
                            <MenuFlyoutItem x:ConnectionId='35' Text="Degradado"                       />
                            <MenuFlyoutItem x:ConnectionId='36' Text="Imagen"                    />
                        </MenuFlyout>
                    </Button.Flyout>
                    <FontIcon Glyph="&#xe713;" FontFamily="Segoe MDL2 Assets" FontSize="24"/>
                </Button>

            </StackPanel>

        </Grid>

        <!-- BACKGROUND: dos imágenes para crossfade -->
        <Image x:ConnectionId='4' x:Name="BackgroundImageA"
               Grid.Column="1"
               Stretch="UniformToFill"
               Grid.RowSpan="3"
               Opacity="1"/>

        <Image x:ConnectionId='5' x:Name="BackgroundImageB"
               Grid.Column="1"
               Stretch="UniformToFill"
               Grid.RowSpan="3"
               Opacity="0"/>

        <!-- GRADIENT OVERLAY (más intenso para mayor presencia visual) -->
        <Grid Grid.Column="1" Grid.RowSpan="3">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                    <!-- Stops más oscuros y con mayor opacidad para mayor intensidad -->
                    <GradientStop Color="#00000000" Offset="0"/>
                    <GradientStop Color="#22000000" Offset="0.35"/>
                    <GradientStop Color="#66000000" Offset="0.65"/>
                    <GradientStop Color="#CC000000" Offset="1"/>
                </LinearGradientBrush>
            </Grid.Background>
        </Grid>

        <!-- SPLASH / STARTUP — estilo minimal, centrado tipo PS5 -->
        <Grid x:ConnectionId='6' x:Name="SplashOverlay"
              Grid.Column="1"
              Grid.RowSpan="3"
              Background="Transparent"
              Visibility="Visible"
              IsHitTestVisible="False">
            <!-- se muestra el mismo fondo (las imágenes A/B están debajo) -->
            <Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="14" Opacity="1">
                    <!-- Minimal logo / marca -->
                    <TextBlock Text="HANDHELD"
                               FontSize="42"
                               FontWeight="Bold"
                               Foreground="White"
                               HorizontalAlignment="Center"/>
                    <TextBlock Text="Launcher" FontSize="20" Foreground="#DDFFFFFF" HorizontalAlignment="Center"/>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- STATUS (red + bateria + reloj) -->
        <StackPanel x:ConnectionId='7' Grid.Column="1" Grid.Row="0"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Top"
                    Margin="0,30,40,0"
                    Spacing="12"
                    x:Name="StatusPanel">

            <!-- Network: icon + (opcional) texto -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="6">
                <FontIcon x:ConnectionId='29' x:Name="NetworkIcon"
                          FontFamily="Segoe MDL2 Assets"
                          Glyph="&#xE701;"
                          FontSize="20"
                          Foreground="LightGray"
                          VerticalAlignment="Center"/>
                <!-- opcional etiqueta corta -->
                <TextBlock x:ConnectionId='30' x:Name="NetworkText"
                           Text=""
                           Foreground="White"
                           FontSize="14"
                           VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Battery: icon + porcentaje -->
            <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Spacing="6">
                <FontIcon x:ConnectionId='27' x:Name="BatteryIcon"
                          FontFamily="Segoe MDL2 Assets"
                          Glyph="&#xEB10;"
                          FontSize="20"
                          Foreground="LightGray"
                          VerticalAlignment="Center"/>
                <TextBlock x:ConnectionId='28' x:Name="BatteryPercent"
                           Text=""
                           Foreground="White"
                           FontSize="14"
                           VerticalAlignment="Center"/>
            </StackPanel>

            <!-- Reloj -->
            <TextBlock x:ConnectionId='26' x:Name="TimeTextBlock"
                       FontSize="26"
                       FontWeight="SemiBold"
                       Foreground="White"
                       VerticalAlignment="Center"/>
        </StackPanel>

        <!-- CONTENEDOR DE VISTAS -->
        <Grid Grid.Column="1" Grid.Row="1">

            <!-- HOME VIEW -->
            <StackPanel x:ConnectionId='8' x:Name="HomeView" Padding="40,0">

                <StackPanel Orientation="Horizontal" Spacing="20" Margin="0,0,0,20">
                    <TextBlock Text="MIS JUEGOS"
                               FontWeight="Bold"
                               FontSize="28"
                               Foreground="White"/>
                </StackPanel>

                <ScrollViewer x:ConnectionId='20' x:Name="CarouselScrollViewer"
                              HorizontalScrollMode="Enabled"
                              HorizontalScrollBarVisibility="Hidden"
                              VerticalScrollMode="Disabled">

                    <GridView x:ConnectionId='21' x:Name="CarouselGrid"
                                                                            
                              IsItemClickEnabled="True"
                                                                
                              SelectionMode="Single">

                        <GridView.ItemContainerStyle>
                            <Style TargetType="GridViewItem">
                                <!-- Desactivar el foco visual del sistema (quita el borde azul) -->
                                <Setter Property="UIElement.UseSystemFocusVisuals" Value="False"/>
                                <!-- Asegurar que no se pinte ningún trazado de foco -->
                                <Setter Property="FrameworkElement.FocusVisualPrimaryBrush" Value="Transparent"/>
                                <Setter Property="FrameworkElement.FocusVisualSecondaryBrush" Value="Transparent"/>
                                <Setter Property="FrameworkElement.FocusVisualPrimaryThickness" Value="0"/>
                                <Setter Property="FrameworkElement.FocusVisualSecondaryThickness" Value="0"/>
                            </Style>
                        </GridView.ItemContainerStyle>

                        <GridView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </GridView.ItemsPanel>

                        <GridView.ItemTemplate>
                            <DataTemplate                            >
                                <StackPanel x:ConnectionId='23' Width="{Binding IsLarge, Converter={StaticResource BoolToWidthConverter}}" Margin="14">
                                    <Border Height="260" CornerRadius="12" Background="#222" Width="{Binding IsLarge, Converter={StaticResource BoolToWidthConverter}}">
                                        <Image x:ConnectionId='25'                                Stretch="UniformToFill"/>
                                    </Border>
                                    <TextBlock x:ConnectionId='24'                      Foreground="White" Margin="0,10,0,0" TextWrapping="Wrap"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridView.ItemTemplate>

                    </GridView>
                </ScrollViewer>

            </StackPanel>

            <!-- LIBRARY VIEW -->
            <Grid x:ConnectionId='9' x:Name="LibraryView"
                  Visibility="Collapsed"
                  Height="1060"
                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                  Padding="40">

                <Grid.Background>
                    <SolidColorBrush Color="#AA000000" />
                    <!-- negro semi-transparente -->
                </Grid.Background>

                <StackPanel>

                    <TextBlock Text="BIBLIOTECA"
                               FontSize="40"
                               Foreground="White"
                               Margin="0,0,0,30"/>

                    <GridView x:ConnectionId='15' x:Name="LibraryGrid"
                                                                            
                              IsItemClickEnabled="True"
                                                               
                              SelectionMode="Single">

                        <GridView.ItemContainerStyle>
                            <Style TargetType="GridViewItem">
                                <Setter Property="UIElement.UseSystemFocusVisuals" Value="False"/>
                                <Setter Property="FrameworkElement.FocusVisualPrimaryBrush" Value="Transparent"/>
                                <Setter Property="FrameworkElement.FocusVisualSecondaryBrush" Value="Transparent"/>
                                <Setter Property="FrameworkElement.FocusVisualPrimaryThickness" Value="0"/>
                                <Setter Property="FrameworkElement.FocusVisualSecondaryThickness" Value="0"/>
                            </Style>
                        </GridView.ItemContainerStyle>

                        <GridView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <ItemsWrapGrid Orientation="Horizontal"
                                               MaximumRowsOrColumns="6"/>
                            </ItemsPanelTemplate>
                        </GridView.ItemsPanel>

                        <GridView.ItemTemplate>
                            <DataTemplate                            >
                                <StackPanel x:ConnectionId='17' Width="200" Margin="12">
                                    <Border Height="260"
                                            CornerRadius="12"
                                            Background="#222">
                                        <Image x:ConnectionId='19'                               
                                               Stretch="UniformToFill"/>
                                    </Border>
                                    <TextBlock x:ConnectionId='18'                     
                                               Foreground="White"
                                               Margin="0,10,0,0"
                                               TextWrapping="Wrap"/>
                                </StackPanel>
                            </DataTemplate>
                        </GridView.ItemTemplate>

                    </GridView>

                </StackPanel>
            </Grid>

            <Grid x:ConnectionId='10' x:Name="DetailOverlay"
              Grid.RowSpan="3"
              Visibility="Collapsed"
              Background="#FF000000"
              IsHitTestVisible="False">

                <!-- Fondo -->
                <Image Source="{Binding SelectedGame.BackgroundOrIcon}"
                   Stretch="UniformToFill"
                   Opacity="0.35"/>

                <!-- Degradado -->
                <Rectangle>
                    <Rectangle.Fill>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                            <GradientStop Color="#00000000" Offset="0.0"/>
                            <GradientStop Color="#CC000000" Offset="0.6"/>
                        </LinearGradientBrush>
                    </Rectangle.Fill>
                </Rectangle>

                <!-- CONTENIDO SCROLLEABLE -->
                <ScrollViewer VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Disabled"
                  IsHitTestVisible="True">

                    <Grid Margin="80"
              MaxWidth="1300">

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"/>
                            <ColumnDefinition Width="1.2*"/>
                        </Grid.ColumnDefinitions>

                        <!-- COLUMNA IZQUIERDA -->
                        <StackPanel Grid.Column="0"
                        Spacing="20">

                            <!-- Logo -->
                            <Image Source="{Binding SelectedGame.Logo}"
                       Stretch="Uniform"
                       MaxWidth="350"
                       HorizontalAlignment="Left"
                       Visibility="{Binding SelectedGame.Logo, Converter={StaticResource NullToVisibilityConverter}}"/>

                            <!-- Nombre si no hay logo -->
                            <TextBlock Text="{Binding SelectedGame.Name}"
                           FontSize="72"
                           FontFamily="ms-appx:///Assets/GoogleSans-Variable.ttf#Google Sans"
                           FontWeight="SemiBold"
                           Foreground="White"
                           TextWrapping="Wrap"
                           MaxWidth="700"
                           Visibility="{Binding SelectedGame.Logo, Converter={StaticResource NullToVisibilityInverted}}"/>

                            <!-- DESCRIPCIÓN -->
                            <TextBlock Text="{Binding SelectedGame.Description}"
                           FontSize="18"
                           Foreground="#E6FFFFFF"
                           TextWrapping="Wrap"
                           MaxWidth="700"
                           LineHeight="28"/>

                            <!-- BOTONES -->
                            <StackPanel Orientation="Horizontal"
                            Spacing="20"
                            Margin="0,30,0,0">
                                <Button x:ConnectionId='12' Content="▶ PLAY"
                                                          
                            Style="{StaticResource AccentButtonStyle}"
                            Width="160"
                            Height="48" />
                                <Button x:ConnectionId='13' Content="Cerrar"
                                                    
                            Width="120"
                            Height="48" />
                                <Button x:ConnectionId='14' Content="⋯"
                            Width="48"
                            Height="48"
                            FontSize="22"
                                                         />
                            </StackPanel>

                        </StackPanel>

                        <!-- COLUMNA DERECHA - TRAILER -->
                        <Border Grid.Column="1"
                    Margin="40,0,0,0"
                    CornerRadius="20"
                    Background="#22000000"
                    Padding="12"
                    VerticalAlignment="Top">

                            <WebView2 x:ConnectionId='11' x:Name="GameTrailerView"
                          Height="320"/>

                        </Border>

                    </Grid>

                </ScrollViewer>

            </Grid>

        </Grid>

    </Grid>
</Window>

